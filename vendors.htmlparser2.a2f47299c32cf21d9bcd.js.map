{"version":3,"sources":["webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/tagtypes.js","webpack:///./node_modules/htmlparser2/lib/index.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/stringify.js","webpack:///./node_modules/htmlparser2/node_modules/dom-serializer/lib/index.js","webpack:///./node_modules/htmlparser2/node_modules/dom-serializer/lib/foreignNames.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/traversal.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/manipulation.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/legacy.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/helpers.js","webpack:///./node_modules/htmlparser2/lib/Parser.js","webpack:///./node_modules/htmlparser2/lib/Tokenizer.js","webpack:///./node_modules/htmlparser2/lib/FeedHandler.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/index.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/querying.js"],"names":["Object","defineProperty","exports","value","hasChildren","isComment","isText","isCDATA","isTag","domelementtype_1","node","type","prototype","hasOwnProperty","call","__createBinding","this","create","o","m","k","k2","undefined","enumerable","get","__setModuleDefault","v","__importStar","mod","__esModule","result","__exportStar","p","__importDefault","RssHandler","DefaultHandler","DomUtils","ElementType","Tokenizer","createDomStream","parseDOM","DomHandler","Parser","Parser_1","domhandler_1","data","options","handler","end","dom","cb","elementCb","Tokenizer_1","default","FeedHandler_1","FeedHandler","getText","getInnerHTML","getOuterHTML","tagtypes_1","dom_serializer_1","children","map","join","Array","isArray","name","__assign","assign","t","s","i","n","arguments","length","apply","entities_1","foreignNames_1","unencodedElements","Set","singleTag","render","nodes","cheerio","output","renderNode","Root","Directive","Doctype","Comment","elem","renderComment","CDATA","renderCdata","Script","Style","Tag","opts","_a","xmlMode","elementNames","parent","foreignModeIntegrationPoints","has","foreignElements","tag","attribs","attributes","keys","key","_b","attributeNames","emptyAttrs","decodeEntities","encodeXML","replace","formatAttributes","selfClosingTags","renderTag","Text","renderText","Map","nextElementSibling","getName","hasAttrib","getAttributeValue","getSiblings","getParent","getChildren","emptyArray","siblings","prev","next","unshift","push","removeElement","childs","splice","lastIndexOf","prepend","prependChild","append","appendChild","replaceElement","replacement","child","sibling","currNext","indexOf","getElementsByTagType","getElementsByTagName","getElementById","getElements","testElement","querying_1","Checks","tag_name","tag_type","tag_contains","getAttribCheck","attrib","combineFuncs","a","b","compileTest","funcs","reduce","test","recurse","limit","Infinity","filter","id","findOne","tagName","uniqueSort","compareDocumentPosition","removeSubsets","nodeA","nodeB","aParents","bParents","current","maxIdx","Math","min","idx","sharedParent","aSibling","bSibling","ancestor","includes","arr","sort","relative","formTags","pTag","openImpliesClose","tr","th","td","body","li","h1","h2","h3","h4","h5","h6","select","input","button","datalist","textarea","option","optgroup","dd","dt","address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","header","hr","main","nav","ol","pre","section","table","ul","rt","rp","tbody","tfoot","voidElements","foreignContextElements","htmlIntegrationElements","reNameEnd","cbs","_c","_d","_e","startIndex","endIndex","tagname","attribname","attribvalue","stack","foreignContext","lowerCaseTagNames","lowerCaseTags","lowerCaseAttributeNames","tokenizer","onparserinit","updatePosition","initialOffset","sectionStart","getAbsoluteIndex","ontext","onopentagname","toLowerCase","el","onclosetag","onopentag","onopentagend","pop","closeCurrentTag","pos","onselfclosingtag","recognizeSelfClosing","onattribname","onattribdata","onattribend","quote","onattribute","getInstructionName","search","substr","ondeclaration","onprocessinginstruction","name_1","name_2","oncomment","oncommentend","oncdata","_f","recognizeCDATA","oncdatastart","oncdataend","onerror","err","onend","reset","onreset","parseComplete","write","chunk","pause","resume","parseChunk","done","decode_codepoint_1","entities_json_1","legacy_json_1","xml_json_1","whitespace","c","isASCIIAlpha","ifElseState","upper","SUCCESS","FAILURE","lower","_state","_index","consumeSpecialNameChar","NEXT_STATE","stateBeforeCdata1","stateBeforeCdata2","stateBeforeCdata3","stateBeforeCdata4","stateBeforeCdata5","stateBeforeScript1","stateBeforeScript2","stateBeforeScript3","stateBeforeScript4","stateAfterScript1","stateAfterScript2","stateAfterScript3","stateAfterScript4","stateBeforeStyle1","stateBeforeStyle2","stateBeforeStyle3","stateAfterStyle1","stateAfterStyle2","stateAfterStyle3","stateBeforeSpecialT","stateBeforeTitle1","stateBeforeTitle2","stateBeforeTitle3","stateAfterSpecialTEnd","stateAfterTitle1","stateAfterTitle2","stateAfterTitle3","stateBeforeEntity","stateBeforeNumericEntity","buffer","bufferOffset","baseState","special","running","ended","Error","parse","finish","stateText","getSection","stateBeforeTagName","stateInTagName","emitToken","stateBeforeClosingTagName","stateInClosingTagName","stateAfterClosingTagName","stateBeforeAttributeName","stateInSelfClosingTag","stateInAttributeName","stateAfterAttributeName","stateBeforeAttributeValue","handleInAttributeValue","stateInAttributeValueDoubleQuotes","stateInAttributeValueSingleQuotes","stateInAttributeValueNoQuotes","stateBeforeDeclaration","stateInDeclaration","stateInProcessingInstruction","stateBeforeComment","stateInComment","stateInSpecialComment","substring","stateAfterComment1","stateAfterComment2","stateBeforeCdata6","stateInCdata","stateAfterCdata1","stateAfterCdata2","stateBeforeSpecialS","stateBeforeSpecialSEnd","stateBeforeSpecialLast","stateAfterSpecialLast","sectionStartOffset","parseFixedEntity","entity","emitPartial","parseLegacyEntity","start","stateInNamedEntity","decodeNumericEntity","offset","base","strict","parsed","parseInt","stateInNumericEntity","stateInHexEntity","cleanup","charAt","handleTrailingData","extendStatics","__extends","d","setPrototypeOf","__proto__","__","constructor","parseFeed","FeedItemMediaMedium","FeedItemMediaExpression","_super","callback","feed","feedRoot","getOneElement","isValidFeed","addConditionally","href","getAttribute","link","updated","fetch","Date","items","item","entry","description","pubDate","media","getMediaElements","handleCallback","where","medium","isDefault","url","fileSize","expression","bitrate","framerate","samplingrate","channels","duration","height","width","lang","trim","obj","prop","what","tmp","defaultOptions","findAll","existsOne","findOneChild","find","_i","nodes_1","checked","some","shift"],"mappings":"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","file":"vendors.htmlparser2.a2f47299c32cf21d9bcd.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hasChildren = exports.isComment = exports.isText = exports.isCDATA = exports.isTag = void 0;\nvar domelementtype_1 = require(\"domelementtype\");\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `Element`, `false` otherwise.\n */\nfunction isTag(node) {\n    return domelementtype_1.isTag(node);\n}\nexports.isTag = isTag;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `NodeWithChildren`, `false` otherwise.\n */\nfunction isCDATA(node) {\n    return node.type === \"cdata\" /* CDATA */;\n}\nexports.isCDATA = isCDATA;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `DataNode`, `false` otherwise.\n */\nfunction isText(node) {\n    return node.type === \"text\" /* Text */;\n}\nexports.isText = isText;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `DataNode`, `false` otherwise.\n */\nfunction isComment(node) {\n    return node.type === \"comment\" /* Comment */;\n}\nexports.isComment = isComment;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `NodeWithChildren` (has children), `false` otherwise.\n */\nfunction hasChildren(node) {\n    return Object.prototype.hasOwnProperty.call(node, \"children\");\n}\nexports.hasChildren = hasChildren;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RssHandler = exports.DefaultHandler = exports.DomUtils = exports.ElementType = exports.Tokenizer = exports.createDomStream = exports.parseDOM = exports.DomHandler = exports.Parser = void 0;\nvar Parser_1 = require(\"./Parser\");\nObject.defineProperty(exports, \"Parser\", { enumerable: true, get: function () { return Parser_1.Parser; } });\nvar domhandler_1 = require(\"domhandler\");\nObject.defineProperty(exports, \"DomHandler\", { enumerable: true, get: function () { return domhandler_1.DomHandler; } });\nObject.defineProperty(exports, \"DefaultHandler\", { enumerable: true, get: function () { return domhandler_1.DomHandler; } });\n// Helper methods\n/**\n * Parses data, returns the resulting DOM.\n *\n * @param data The data that should be parsed.\n * @param options Optional options for the parser and DOM builder.\n */\nfunction parseDOM(data, options) {\n    var handler = new domhandler_1.DomHandler(void 0, options);\n    new Parser_1.Parser(handler, options).end(data);\n    return handler.dom;\n}\nexports.parseDOM = parseDOM;\n/**\n * Creates a parser instance, with an attached DOM handler.\n *\n * @param cb A callback that will be called once parsing has been completed.\n * @param options Optional options for the parser and DOM builder.\n * @param elementCb An optional callback that will be called every time a tag has been completed inside of the DOM.\n */\nfunction createDomStream(cb, options, elementCb) {\n    var handler = new domhandler_1.DomHandler(cb, options, elementCb);\n    return new Parser_1.Parser(handler, options);\n}\nexports.createDomStream = createDomStream;\nvar Tokenizer_1 = require(\"./Tokenizer\");\nObject.defineProperty(exports, \"Tokenizer\", { enumerable: true, get: function () { return __importDefault(Tokenizer_1).default; } });\nvar ElementType = __importStar(require(\"domelementtype\"));\nexports.ElementType = ElementType;\n/*\n * All of the following exports exist for backwards-compatibility.\n * They should probably be removed eventually.\n */\n__exportStar(require(\"./FeedHandler\"), exports);\nexports.DomUtils = __importStar(require(\"domutils\"));\nvar FeedHandler_1 = require(\"./FeedHandler\");\nObject.defineProperty(exports, \"RssHandler\", { enumerable: true, get: function () { return FeedHandler_1.FeedHandler; } });\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getText = exports.getInnerHTML = exports.getOuterHTML = void 0;\nvar tagtypes_1 = require(\"./tagtypes\");\nvar dom_serializer_1 = __importDefault(require(\"dom-serializer\"));\n/**\n * @param node Node to get the outer HTML of.\n * @param options Options for serialization.\n * @deprecated Use the `dom-serializer` module directly.\n * @returns `node`'s outer HTML.\n */\nfunction getOuterHTML(node, options) {\n    return dom_serializer_1.default(node, options);\n}\nexports.getOuterHTML = getOuterHTML;\n/**\n * @param node Node to get the inner HTML of.\n * @param options Options for serialization.\n * @deprecated Use the `dom-serializer` module directly.\n * @returns `node`'s inner HTML.\n */\nfunction getInnerHTML(node, options) {\n    return tagtypes_1.hasChildren(node)\n        ? node.children.map(function (node) { return getOuterHTML(node, options); }).join(\"\")\n        : \"\";\n}\nexports.getInnerHTML = getInnerHTML;\n/**\n * Get a node's inner text.\n *\n * @param node Node to get the inner text of.\n * @returns `node`'s inner text.\n */\nfunction getText(node) {\n    if (Array.isArray(node))\n        return node.map(getText).join(\"\");\n    if (tagtypes_1.isTag(node))\n        return node.name === \"br\" ? \"\\n\" : getText(node.children);\n    if (tagtypes_1.isCDATA(node))\n        return getText(node.children);\n    if (tagtypes_1.isText(node))\n        return node.data;\n    return \"\";\n}\nexports.getText = getText;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Module dependencies\n */\nvar ElementType = __importStar(require(\"domelementtype\"));\nvar entities_1 = require(\"entities\");\n/*\n * Mixed-case SVG and MathML tags & attributes\n * recognized by the HTML parser, see\n * https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-inforeign\n */\nvar foreignNames_1 = require(\"./foreignNames\");\nvar unencodedElements = new Set([\n    \"style\",\n    \"script\",\n    \"xmp\",\n    \"iframe\",\n    \"noembed\",\n    \"noframes\",\n    \"plaintext\",\n    \"noscript\",\n]);\n/**\n * Format attributes\n */\nfunction formatAttributes(attributes, opts) {\n    if (!attributes)\n        return;\n    return Object.keys(attributes)\n        .map(function (key) {\n        var _a, _b;\n        var value = (_a = attributes[key]) !== null && _a !== void 0 ? _a : \"\";\n        if (opts.xmlMode === \"foreign\") {\n            /* Fix up mixed-case attribute names */\n            key = (_b = foreignNames_1.attributeNames.get(key)) !== null && _b !== void 0 ? _b : key;\n        }\n        if (!opts.emptyAttrs && !opts.xmlMode && value === \"\") {\n            return key;\n        }\n        return key + \"=\\\"\" + (opts.decodeEntities ? entities_1.encodeXML(value) : value.replace(/\"/g, \"&quot;\")) + \"\\\"\";\n    })\n        .join(\" \");\n}\n/**\n * Self-enclosing tags\n */\nvar singleTag = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\n/**\n * Renders a DOM node or an array of DOM nodes to a string.\n *\n * Can be thought of as the equivalent of the `outerHTML` of the passed node(s).\n *\n * @param node Node to be rendered.\n * @param options Changes serialization behavior\n */\nfunction render(node, options) {\n    if (options === void 0) { options = {}; }\n    // TODO: This is a bit hacky.\n    var nodes = Array.isArray(node) || node.cheerio ? node : [node];\n    var output = \"\";\n    for (var i = 0; i < nodes.length; i++) {\n        output += renderNode(nodes[i], options);\n    }\n    return output;\n}\nexports.default = render;\nfunction renderNode(node, options) {\n    switch (node.type) {\n        case ElementType.Root:\n            return render(node.children, options);\n        case ElementType.Directive:\n        case ElementType.Doctype:\n            return renderDirective(node);\n        case ElementType.Comment:\n            return renderComment(node);\n        case ElementType.CDATA:\n            return renderCdata(node);\n        case ElementType.Script:\n        case ElementType.Style:\n        case ElementType.Tag:\n            return renderTag(node, options);\n        case ElementType.Text:\n            return renderText(node, options);\n    }\n}\nvar foreignModeIntegrationPoints = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignObject\",\n    \"desc\",\n    \"title\",\n]);\nvar foreignElements = new Set([\"svg\", \"math\"]);\nfunction renderTag(elem, opts) {\n    var _a;\n    // Handle SVG / MathML in HTML\n    if (opts.xmlMode === \"foreign\") {\n        /* Fix up mixed-case element names */\n        elem.name = (_a = foreignNames_1.elementNames.get(elem.name)) !== null && _a !== void 0 ? _a : elem.name;\n        /* Exit foreign mode at integration points */\n        if (elem.parent &&\n            foreignModeIntegrationPoints.has(elem.parent.name)) {\n            opts = __assign(__assign({}, opts), { xmlMode: false });\n        }\n    }\n    if (!opts.xmlMode && foreignElements.has(elem.name)) {\n        opts = __assign(__assign({}, opts), { xmlMode: \"foreign\" });\n    }\n    var tag = \"<\" + elem.name;\n    var attribs = formatAttributes(elem.attribs, opts);\n    if (attribs) {\n        tag += \" \" + attribs;\n    }\n    if (elem.children.length === 0 &&\n        (opts.xmlMode\n            ? // In XML mode or foreign mode, and user hasn't explicitly turned off self-closing tags\n                opts.selfClosingTags !== false\n            : // User explicitly asked for self-closing tags, even in HTML mode\n                opts.selfClosingTags && singleTag.has(elem.name))) {\n        if (!opts.xmlMode)\n            tag += \" \";\n        tag += \"/>\";\n    }\n    else {\n        tag += \">\";\n        if (elem.children.length > 0) {\n            tag += render(elem.children, opts);\n        }\n        if (opts.xmlMode || !singleTag.has(elem.name)) {\n            tag += \"</\" + elem.name + \">\";\n        }\n    }\n    return tag;\n}\nfunction renderDirective(elem) {\n    return \"<\" + elem.data + \">\";\n}\nfunction renderText(elem, opts) {\n    var data = elem.data || \"\";\n    // If entities weren't decoded, no need to encode them back\n    if (opts.decodeEntities &&\n        !(elem.parent && unencodedElements.has(elem.parent.name))) {\n        data = entities_1.encodeXML(data);\n    }\n    return data;\n}\nfunction renderCdata(elem) {\n    return \"<![CDATA[\" + elem.children[0].data + \"]]>\";\n}\nfunction renderComment(elem) {\n    return \"<!--\" + elem.data + \"-->\";\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.attributeNames = exports.elementNames = void 0;\nexports.elementNames = new Map([\n    [\"altglyph\", \"altGlyph\"],\n    [\"altglyphdef\", \"altGlyphDef\"],\n    [\"altglyphitem\", \"altGlyphItem\"],\n    [\"animatecolor\", \"animateColor\"],\n    [\"animatemotion\", \"animateMotion\"],\n    [\"animatetransform\", \"animateTransform\"],\n    [\"clippath\", \"clipPath\"],\n    [\"feblend\", \"feBlend\"],\n    [\"fecolormatrix\", \"feColorMatrix\"],\n    [\"fecomponenttransfer\", \"feComponentTransfer\"],\n    [\"fecomposite\", \"feComposite\"],\n    [\"feconvolvematrix\", \"feConvolveMatrix\"],\n    [\"fediffuselighting\", \"feDiffuseLighting\"],\n    [\"fedisplacementmap\", \"feDisplacementMap\"],\n    [\"fedistantlight\", \"feDistantLight\"],\n    [\"fedropshadow\", \"feDropShadow\"],\n    [\"feflood\", \"feFlood\"],\n    [\"fefunca\", \"feFuncA\"],\n    [\"fefuncb\", \"feFuncB\"],\n    [\"fefuncg\", \"feFuncG\"],\n    [\"fefuncr\", \"feFuncR\"],\n    [\"fegaussianblur\", \"feGaussianBlur\"],\n    [\"feimage\", \"feImage\"],\n    [\"femerge\", \"feMerge\"],\n    [\"femergenode\", \"feMergeNode\"],\n    [\"femorphology\", \"feMorphology\"],\n    [\"feoffset\", \"feOffset\"],\n    [\"fepointlight\", \"fePointLight\"],\n    [\"fespecularlighting\", \"feSpecularLighting\"],\n    [\"fespotlight\", \"feSpotLight\"],\n    [\"fetile\", \"feTile\"],\n    [\"feturbulence\", \"feTurbulence\"],\n    [\"foreignobject\", \"foreignObject\"],\n    [\"glyphref\", \"glyphRef\"],\n    [\"lineargradient\", \"linearGradient\"],\n    [\"radialgradient\", \"radialGradient\"],\n    [\"textpath\", \"textPath\"],\n]);\nexports.attributeNames = new Map([\n    [\"definitionurl\", \"definitionURL\"],\n    [\"attributename\", \"attributeName\"],\n    [\"attributetype\", \"attributeType\"],\n    [\"basefrequency\", \"baseFrequency\"],\n    [\"baseprofile\", \"baseProfile\"],\n    [\"calcmode\", \"calcMode\"],\n    [\"clippathunits\", \"clipPathUnits\"],\n    [\"diffuseconstant\", \"diffuseConstant\"],\n    [\"edgemode\", \"edgeMode\"],\n    [\"filterunits\", \"filterUnits\"],\n    [\"glyphref\", \"glyphRef\"],\n    [\"gradienttransform\", \"gradientTransform\"],\n    [\"gradientunits\", \"gradientUnits\"],\n    [\"kernelmatrix\", \"kernelMatrix\"],\n    [\"kernelunitlength\", \"kernelUnitLength\"],\n    [\"keypoints\", \"keyPoints\"],\n    [\"keysplines\", \"keySplines\"],\n    [\"keytimes\", \"keyTimes\"],\n    [\"lengthadjust\", \"lengthAdjust\"],\n    [\"limitingconeangle\", \"limitingConeAngle\"],\n    [\"markerheight\", \"markerHeight\"],\n    [\"markerunits\", \"markerUnits\"],\n    [\"markerwidth\", \"markerWidth\"],\n    [\"maskcontentunits\", \"maskContentUnits\"],\n    [\"maskunits\", \"maskUnits\"],\n    [\"numoctaves\", \"numOctaves\"],\n    [\"pathlength\", \"pathLength\"],\n    [\"patterncontentunits\", \"patternContentUnits\"],\n    [\"patterntransform\", \"patternTransform\"],\n    [\"patternunits\", \"patternUnits\"],\n    [\"pointsatx\", \"pointsAtX\"],\n    [\"pointsaty\", \"pointsAtY\"],\n    [\"pointsatz\", \"pointsAtZ\"],\n    [\"preservealpha\", \"preserveAlpha\"],\n    [\"preserveaspectratio\", \"preserveAspectRatio\"],\n    [\"primitiveunits\", \"primitiveUnits\"],\n    [\"refx\", \"refX\"],\n    [\"refy\", \"refY\"],\n    [\"repeatcount\", \"repeatCount\"],\n    [\"repeatdur\", \"repeatDur\"],\n    [\"requiredextensions\", \"requiredExtensions\"],\n    [\"requiredfeatures\", \"requiredFeatures\"],\n    [\"specularconstant\", \"specularConstant\"],\n    [\"specularexponent\", \"specularExponent\"],\n    [\"spreadmethod\", \"spreadMethod\"],\n    [\"startoffset\", \"startOffset\"],\n    [\"stddeviation\", \"stdDeviation\"],\n    [\"stitchtiles\", \"stitchTiles\"],\n    [\"surfacescale\", \"surfaceScale\"],\n    [\"systemlanguage\", \"systemLanguage\"],\n    [\"tablevalues\", \"tableValues\"],\n    [\"targetx\", \"targetX\"],\n    [\"targety\", \"targetY\"],\n    [\"textlength\", \"textLength\"],\n    [\"viewbox\", \"viewBox\"],\n    [\"viewtarget\", \"viewTarget\"],\n    [\"xchannelselector\", \"xChannelSelector\"],\n    [\"ychannelselector\", \"yChannelSelector\"],\n    [\"zoomandpan\", \"zoomAndPan\"],\n]);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nextElementSibling = exports.getName = exports.hasAttrib = exports.getAttributeValue = exports.getSiblings = exports.getParent = exports.getChildren = void 0;\nvar tagtypes_1 = require(\"./tagtypes\");\nvar emptyArray = [];\n/**\n * Get a node's children.\n *\n * @param elem Node to get the children of.\n * @returns `elem`'s children, or an empty array.\n */\nfunction getChildren(elem) {\n    var _a;\n    return (_a = elem.children) !== null && _a !== void 0 ? _a : emptyArray;\n}\nexports.getChildren = getChildren;\n/**\n * Get a node's parent.\n *\n * @param elem Node to get the parent of.\n * @returns `elem`'s parent node.\n */\nfunction getParent(elem) {\n    return elem.parent || null;\n}\nexports.getParent = getParent;\n/**\n * Gets an elements siblings, including the element itself.\n *\n * Attempts to get the children through the element's parent first.\n * If we don't have a parent (the element is a root node),\n * we walk the element's `prev` & `next` to get all remaining nodes.\n *\n * @param elem Element to get the siblings of.\n * @returns `elem`'s siblings.\n */\nfunction getSiblings(elem) {\n    var _a, _b;\n    var parent = getParent(elem);\n    if (parent != null)\n        return getChildren(parent);\n    var siblings = [elem];\n    var prev = elem.prev, next = elem.next;\n    while (prev != null) {\n        siblings.unshift(prev);\n        (_a = prev, prev = _a.prev);\n    }\n    while (next != null) {\n        siblings.push(next);\n        (_b = next, next = _b.next);\n    }\n    return siblings;\n}\nexports.getSiblings = getSiblings;\n/**\n * Gets an attribute from an element.\n *\n * @param elem Element to check.\n * @param name Attribute name to retrieve.\n * @returns The element's attribute value, or `undefined`.\n */\nfunction getAttributeValue(elem, name) {\n    var _a;\n    return (_a = elem.attribs) === null || _a === void 0 ? void 0 : _a[name];\n}\nexports.getAttributeValue = getAttributeValue;\n/**\n * Checks whether an element has an attribute.\n *\n * @param elem Element to check.\n * @param name Attribute name to look for.\n * @returns Returns whether `elem` has the attribute `name`.\n */\nfunction hasAttrib(elem, name) {\n    return (elem.attribs != null &&\n        Object.prototype.hasOwnProperty.call(elem.attribs, name) &&\n        elem.attribs[name] != null);\n}\nexports.hasAttrib = hasAttrib;\n/**\n * Get the tag name of an element.\n *\n * @param elem The element to get the name for.\n * @returns The tag name of `elem`.\n */\nfunction getName(elem) {\n    return elem.name;\n}\nexports.getName = getName;\n/**\n * Returns the next element sibling of a node.\n *\n * @param elem The element to get the next sibling of.\n * @returns `elem`'s next sibling that is a tag.\n */\nfunction nextElementSibling(elem) {\n    var _a;\n    var next = elem.next;\n    while (next !== null && !tagtypes_1.isTag(next))\n        (_a = next, next = _a.next);\n    return next;\n}\nexports.nextElementSibling = nextElementSibling;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.prepend = exports.prependChild = exports.append = exports.appendChild = exports.replaceElement = exports.removeElement = void 0;\n/**\n * Remove an element from the dom\n *\n * @param elem The element to be removed\n */\nfunction removeElement(elem) {\n    if (elem.prev)\n        elem.prev.next = elem.next;\n    if (elem.next)\n        elem.next.prev = elem.prev;\n    if (elem.parent) {\n        var childs = elem.parent.children;\n        childs.splice(childs.lastIndexOf(elem), 1);\n    }\n}\nexports.removeElement = removeElement;\n/**\n * Replace an element in the dom\n *\n * @param elem The element to be replaced\n * @param replacement The element to be added\n */\nfunction replaceElement(elem, replacement) {\n    var prev = (replacement.prev = elem.prev);\n    if (prev) {\n        prev.next = replacement;\n    }\n    var next = (replacement.next = elem.next);\n    if (next) {\n        next.prev = replacement;\n    }\n    var parent = (replacement.parent = elem.parent);\n    if (parent) {\n        var childs = parent.children;\n        childs[childs.lastIndexOf(elem)] = replacement;\n    }\n}\nexports.replaceElement = replaceElement;\n/**\n * Append a child to an element.\n *\n * @param elem The element to append to.\n * @param child The element to be added as a child.\n */\nfunction appendChild(elem, child) {\n    removeElement(child);\n    child.next = null;\n    child.parent = elem;\n    if (elem.children.push(child) > 1) {\n        var sibling = elem.children[elem.children.length - 2];\n        sibling.next = child;\n        child.prev = sibling;\n    }\n    else {\n        child.prev = null;\n    }\n}\nexports.appendChild = appendChild;\n/**\n * Append an element after another.\n *\n * @param elem The element to append after.\n * @param next The element be added.\n */\nfunction append(elem, next) {\n    removeElement(next);\n    var parent = elem.parent;\n    var currNext = elem.next;\n    next.next = currNext;\n    next.prev = elem;\n    elem.next = next;\n    next.parent = parent;\n    if (currNext) {\n        currNext.prev = next;\n        if (parent) {\n            var childs = parent.children;\n            childs.splice(childs.lastIndexOf(currNext), 0, next);\n        }\n    }\n    else if (parent) {\n        parent.children.push(next);\n    }\n}\nexports.append = append;\n/**\n * Prepend a child to an element.\n *\n * @param elem The element to prepend before.\n * @param child The element to be added as a child.\n */\nfunction prependChild(elem, child) {\n    removeElement(child);\n    child.parent = elem;\n    child.prev = null;\n    if (elem.children.unshift(child) !== 1) {\n        var sibling = elem.children[1];\n        sibling.prev = child;\n        child.next = sibling;\n    }\n    else {\n        child.next = null;\n    }\n}\nexports.prependChild = prependChild;\n/**\n * Prepend an element before another.\n *\n * @param elem The element to prepend before.\n * @param prev The element be added.\n */\nfunction prepend(elem, prev) {\n    removeElement(prev);\n    var parent = elem.parent;\n    if (parent) {\n        var childs = parent.children;\n        childs.splice(childs.indexOf(elem), 0, prev);\n    }\n    if (elem.prev) {\n        elem.prev.next = prev;\n    }\n    prev.parent = parent;\n    prev.prev = elem.prev;\n    prev.next = elem;\n    elem.prev = prev;\n}\nexports.prepend = prepend;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getElementsByTagType = exports.getElementsByTagName = exports.getElementById = exports.getElements = exports.testElement = void 0;\nvar querying_1 = require(\"./querying\");\nvar tagtypes_1 = require(\"./tagtypes\");\nvar Checks = {\n    tag_name: function (name) {\n        if (typeof name === \"function\") {\n            return function (elem) { return tagtypes_1.isTag(elem) && name(elem.name); };\n        }\n        else if (name === \"*\") {\n            return tagtypes_1.isTag;\n        }\n        return function (elem) { return tagtypes_1.isTag(elem) && elem.name === name; };\n    },\n    tag_type: function (type) {\n        if (typeof type === \"function\") {\n            return function (elem) { return type(elem.type); };\n        }\n        return function (elem) { return elem.type === type; };\n    },\n    tag_contains: function (data) {\n        if (typeof data === \"function\") {\n            return function (elem) { return tagtypes_1.isText(elem) && data(elem.data); };\n        }\n        return function (elem) { return tagtypes_1.isText(elem) && elem.data === data; };\n    },\n};\n/**\n * @param attrib Attribute to check.\n * @param value Attribute value to look for.\n * @returns A function to check whether the a node has an attribute with a particular value.\n */\nfunction getAttribCheck(attrib, value) {\n    if (typeof value === \"function\") {\n        return function (elem) { return tagtypes_1.isTag(elem) && value(elem.attribs[attrib]); };\n    }\n    return function (elem) { return tagtypes_1.isTag(elem) && elem.attribs[attrib] === value; };\n}\n/**\n * @param a First function to combine.\n * @param b Second function to combine.\n * @returns A function taking a node and returning `true` if either\n * of the input functions returns `true` for the node.\n */\nfunction combineFuncs(a, b) {\n    return function (elem) { return a(elem) || b(elem); };\n}\n/**\n * @param options An object describing nodes to look for.\n * @returns A function executing all checks in `options` and returning `true`\n * if any of them match a node.\n */\nfunction compileTest(options) {\n    var funcs = Object.keys(options).map(function (key) {\n        var value = options[key];\n        return key in Checks\n            ? Checks[key](value)\n            : getAttribCheck(key, value);\n    });\n    return funcs.length === 0 ? null : funcs.reduce(combineFuncs);\n}\n/**\n * @param options An object describing nodes to look for.\n * @param node The element to test.\n * @returns Whether the element matches the description in `options`.\n */\nfunction testElement(options, node) {\n    var test = compileTest(options);\n    return test ? test(node) : true;\n}\nexports.testElement = testElement;\n/**\n * @param options An object describing nodes to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes that match `options`.\n */\nfunction getElements(options, nodes, recurse, limit) {\n    if (limit === void 0) { limit = Infinity; }\n    var test = compileTest(options);\n    return test ? querying_1.filter(test, nodes, recurse, limit) : [];\n}\nexports.getElements = getElements;\n/**\n * @param id The unique ID attribute value to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @returns The node with the supplied ID.\n */\nfunction getElementById(id, nodes, recurse) {\n    if (recurse === void 0) { recurse = true; }\n    if (!Array.isArray(nodes))\n        nodes = [nodes];\n    return querying_1.findOne(getAttribCheck(\"id\", id), nodes, recurse);\n}\nexports.getElementById = getElementById;\n/**\n * @param tagName Tag name to search for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `tagName`.\n */\nfunction getElementsByTagName(tagName, nodes, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    return querying_1.filter(Checks.tag_name(tagName), nodes, recurse, limit);\n}\nexports.getElementsByTagName = getElementsByTagName;\n/**\n * @param type Element type to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `type`.\n */\nfunction getElementsByTagType(type, nodes, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    return querying_1.filter(Checks.tag_type(type), nodes, recurse, limit);\n}\nexports.getElementsByTagType = getElementsByTagType;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uniqueSort = exports.compareDocumentPosition = exports.removeSubsets = void 0;\nvar tagtypes_1 = require(\"./tagtypes\");\n/**\n * Given an array of nodes, remove any member that is contained by another.\n *\n * @param nodes Nodes to filter.\n * @returns Remaining nodes that aren't subtrees of each other.\n */\nfunction removeSubsets(nodes) {\n    var idx = nodes.length;\n    /*\n     * Check if each node (or one of its ancestors) is already contained in the\n     * array.\n     */\n    while (--idx >= 0) {\n        var node = nodes[idx];\n        /*\n         * Remove the node if it is not unique.\n         * We are going through the array from the end, so we only\n         * have to check nodes that preceed the node under consideration in the array.\n         */\n        if (idx > 0 && nodes.lastIndexOf(node, idx - 1) >= 0) {\n            nodes.splice(idx, 1);\n            continue;\n        }\n        for (var ancestor = node.parent; ancestor; ancestor = ancestor.parent) {\n            if (nodes.includes(ancestor)) {\n                nodes.splice(idx, 1);\n                break;\n            }\n        }\n    }\n    return nodes;\n}\nexports.removeSubsets = removeSubsets;\n/**\n * Compare the position of one node against another node in any other document.\n * The return value is a bitmask with the following values:\n *\n * Document order:\n * > There is an ordering, document order, defined on all the nodes in the\n * > document corresponding to the order in which the first character of the\n * > XML representation of each node occurs in the XML representation of the\n * > document after expansion of general entities. Thus, the document element\n * > node will be the first node. Element nodes occur before their children.\n * > Thus, document order orders element nodes in order of the occurrence of\n * > their start-tag in the XML (after expansion of entities). The attribute\n * > nodes of an element occur after the element and before its children. The\n * > relative order of attribute nodes is implementation-dependent./\n *\n * Source:\n * http://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-document-order\n *\n * @param nodeA The first node to use in the comparison\n * @param nodeB The second node to use in the comparison\n * @returns A bitmask describing the input nodes' relative position.\n *\n * See http://dom.spec.whatwg.org/#dom-node-comparedocumentposition for\n * a description of these values.\n */\nfunction compareDocumentPosition(nodeA, nodeB) {\n    var aParents = [];\n    var bParents = [];\n    if (nodeA === nodeB) {\n        return 0;\n    }\n    var current = tagtypes_1.hasChildren(nodeA) ? nodeA : nodeA.parent;\n    while (current) {\n        aParents.unshift(current);\n        current = current.parent;\n    }\n    current = tagtypes_1.hasChildren(nodeB) ? nodeB : nodeB.parent;\n    while (current) {\n        bParents.unshift(current);\n        current = current.parent;\n    }\n    var maxIdx = Math.min(aParents.length, bParents.length);\n    var idx = 0;\n    while (idx < maxIdx && aParents[idx] === bParents[idx]) {\n        idx++;\n    }\n    if (idx === 0) {\n        return 1 /* DISCONNECTED */;\n    }\n    var sharedParent = aParents[idx - 1];\n    var siblings = sharedParent.children;\n    var aSibling = aParents[idx];\n    var bSibling = bParents[idx];\n    if (siblings.indexOf(aSibling) > siblings.indexOf(bSibling)) {\n        if (sharedParent === nodeB) {\n            return 4 /* FOLLOWING */ | 16 /* CONTAINED_BY */;\n        }\n        return 4 /* FOLLOWING */;\n    }\n    if (sharedParent === nodeA) {\n        return 2 /* PRECEDING */ | 8 /* CONTAINS */;\n    }\n    return 2 /* PRECEDING */;\n}\nexports.compareDocumentPosition = compareDocumentPosition;\n/**\n * Sort an array of nodes based on their relative position in the document and\n * remove any duplicate nodes. If the array contains nodes that do not belong\n * to the same document, sort order is unspecified.\n *\n * @param nodes Array of DOM nodes.\n * @returns Collection of unique nodes, sorted in document order.\n */\nfunction uniqueSort(nodes) {\n    nodes = nodes.filter(function (node, i, arr) { return !arr.includes(node, i + 1); });\n    nodes.sort(function (a, b) {\n        var relative = compareDocumentPosition(a, b);\n        if (relative & 2 /* PRECEDING */) {\n            return -1;\n        }\n        else if (relative & 4 /* FOLLOWING */) {\n            return 1;\n        }\n        return 0;\n    });\n    return nodes;\n}\nexports.uniqueSort = uniqueSort;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Parser = void 0;\nvar Tokenizer_1 = __importDefault(require(\"./Tokenizer\"));\nvar formTags = new Set([\n    \"input\",\n    \"option\",\n    \"optgroup\",\n    \"select\",\n    \"button\",\n    \"datalist\",\n    \"textarea\",\n]);\nvar pTag = new Set([\"p\"]);\nvar openImpliesClose = {\n    tr: new Set([\"tr\", \"th\", \"td\"]),\n    th: new Set([\"th\"]),\n    td: new Set([\"thead\", \"th\", \"td\"]),\n    body: new Set([\"head\", \"link\", \"script\"]),\n    li: new Set([\"li\"]),\n    p: pTag,\n    h1: pTag,\n    h2: pTag,\n    h3: pTag,\n    h4: pTag,\n    h5: pTag,\n    h6: pTag,\n    select: formTags,\n    input: formTags,\n    output: formTags,\n    button: formTags,\n    datalist: formTags,\n    textarea: formTags,\n    option: new Set([\"option\"]),\n    optgroup: new Set([\"optgroup\", \"option\"]),\n    dd: new Set([\"dt\", \"dd\"]),\n    dt: new Set([\"dt\", \"dd\"]),\n    address: pTag,\n    article: pTag,\n    aside: pTag,\n    blockquote: pTag,\n    details: pTag,\n    div: pTag,\n    dl: pTag,\n    fieldset: pTag,\n    figcaption: pTag,\n    figure: pTag,\n    footer: pTag,\n    form: pTag,\n    header: pTag,\n    hr: pTag,\n    main: pTag,\n    nav: pTag,\n    ol: pTag,\n    pre: pTag,\n    section: pTag,\n    table: pTag,\n    ul: pTag,\n    rt: new Set([\"rt\", \"rp\"]),\n    rp: new Set([\"rt\", \"rp\"]),\n    tbody: new Set([\"thead\", \"tbody\"]),\n    tfoot: new Set([\"thead\", \"tbody\"]),\n};\nvar voidElements = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\nvar foreignContextElements = new Set([\"math\", \"svg\"]);\nvar htmlIntegrationElements = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignObject\",\n    \"desc\",\n    \"title\",\n]);\nvar reNameEnd = /\\s|\\//;\nvar Parser = /** @class */ (function () {\n    function Parser(cbs, options) {\n        if (options === void 0) { options = {}; }\n        var _a, _b, _c, _d, _e;\n        /** The start index of the last event. */\n        this.startIndex = 0;\n        /** The end index of the last event. */\n        this.endIndex = null;\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n        this.attribs = null;\n        this.stack = [];\n        this.foreignContext = [];\n        this.options = options;\n        this.cbs = cbs !== null && cbs !== void 0 ? cbs : {};\n        this.lowerCaseTagNames = (_a = options.lowerCaseTags) !== null && _a !== void 0 ? _a : !options.xmlMode;\n        this.lowerCaseAttributeNames = (_b = options.lowerCaseAttributeNames) !== null && _b !== void 0 ? _b : !options.xmlMode;\n        this.tokenizer = new ((_c = options.Tokenizer) !== null && _c !== void 0 ? _c : Tokenizer_1.default)(this.options, this);\n        (_e = (_d = this.cbs).onparserinit) === null || _e === void 0 ? void 0 : _e.call(_d, this);\n    }\n    Parser.prototype.updatePosition = function (initialOffset) {\n        if (this.endIndex === null) {\n            if (this.tokenizer.sectionStart <= initialOffset) {\n                this.startIndex = 0;\n            }\n            else {\n                this.startIndex = this.tokenizer.sectionStart - initialOffset;\n            }\n        }\n        else {\n            this.startIndex = this.endIndex + 1;\n        }\n        this.endIndex = this.tokenizer.getAbsoluteIndex();\n    };\n    // Tokenizer event handlers\n    Parser.prototype.ontext = function (data) {\n        var _a, _b;\n        this.updatePosition(1);\n        this.endIndex--;\n        (_b = (_a = this.cbs).ontext) === null || _b === void 0 ? void 0 : _b.call(_a, data);\n    };\n    Parser.prototype.onopentagname = function (name) {\n        var _a, _b;\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        this.tagname = name;\n        if (!this.options.xmlMode &&\n            Object.prototype.hasOwnProperty.call(openImpliesClose, name)) {\n            var el = void 0;\n            while (this.stack.length > 0 &&\n                openImpliesClose[name].has((el = this.stack[this.stack.length - 1]))) {\n                this.onclosetag(el);\n            }\n        }\n        if (this.options.xmlMode || !voidElements.has(name)) {\n            this.stack.push(name);\n            if (foreignContextElements.has(name)) {\n                this.foreignContext.push(true);\n            }\n            else if (htmlIntegrationElements.has(name)) {\n                this.foreignContext.push(false);\n            }\n        }\n        (_b = (_a = this.cbs).onopentagname) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n        if (this.cbs.onopentag)\n            this.attribs = {};\n    };\n    Parser.prototype.onopentagend = function () {\n        var _a, _b;\n        this.updatePosition(1);\n        if (this.attribs) {\n            (_b = (_a = this.cbs).onopentag) === null || _b === void 0 ? void 0 : _b.call(_a, this.tagname, this.attribs);\n            this.attribs = null;\n        }\n        if (!this.options.xmlMode &&\n            this.cbs.onclosetag &&\n            voidElements.has(this.tagname)) {\n            this.cbs.onclosetag(this.tagname);\n        }\n        this.tagname = \"\";\n    };\n    Parser.prototype.onclosetag = function (name) {\n        this.updatePosition(1);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        if (foreignContextElements.has(name) ||\n            htmlIntegrationElements.has(name)) {\n            this.foreignContext.pop();\n        }\n        if (this.stack.length &&\n            (this.options.xmlMode || !voidElements.has(name))) {\n            var pos = this.stack.lastIndexOf(name);\n            if (pos !== -1) {\n                if (this.cbs.onclosetag) {\n                    pos = this.stack.length - pos;\n                    while (pos--) {\n                        // We know the stack has sufficient elements.\n                        this.cbs.onclosetag(this.stack.pop());\n                    }\n                }\n                else\n                    this.stack.length = pos;\n            }\n            else if (name === \"p\" && !this.options.xmlMode) {\n                this.onopentagname(name);\n                this.closeCurrentTag();\n            }\n        }\n        else if (!this.options.xmlMode && (name === \"br\" || name === \"p\")) {\n            this.onopentagname(name);\n            this.closeCurrentTag();\n        }\n    };\n    Parser.prototype.onselfclosingtag = function () {\n        if (this.options.xmlMode ||\n            this.options.recognizeSelfClosing ||\n            this.foreignContext[this.foreignContext.length - 1]) {\n            this.closeCurrentTag();\n        }\n        else {\n            this.onopentagend();\n        }\n    };\n    Parser.prototype.closeCurrentTag = function () {\n        var _a, _b;\n        var name = this.tagname;\n        this.onopentagend();\n        /*\n         * Self-closing tags will be on the top of the stack\n         * (cheaper check than in onclosetag)\n         */\n        if (this.stack[this.stack.length - 1] === name) {\n            (_b = (_a = this.cbs).onclosetag) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n            this.stack.pop();\n        }\n    };\n    Parser.prototype.onattribname = function (name) {\n        if (this.lowerCaseAttributeNames) {\n            name = name.toLowerCase();\n        }\n        this.attribname = name;\n    };\n    Parser.prototype.onattribdata = function (value) {\n        this.attribvalue += value;\n    };\n    Parser.prototype.onattribend = function (quote) {\n        var _a, _b;\n        (_b = (_a = this.cbs).onattribute) === null || _b === void 0 ? void 0 : _b.call(_a, this.attribname, this.attribvalue, quote);\n        if (this.attribs &&\n            !Object.prototype.hasOwnProperty.call(this.attribs, this.attribname)) {\n            this.attribs[this.attribname] = this.attribvalue;\n        }\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n    };\n    Parser.prototype.getInstructionName = function (value) {\n        var idx = value.search(reNameEnd);\n        var name = idx < 0 ? value : value.substr(0, idx);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        return name;\n    };\n    Parser.prototype.ondeclaration = function (value) {\n        if (this.cbs.onprocessinginstruction) {\n            var name_1 = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(\"!\" + name_1, \"!\" + value);\n        }\n    };\n    Parser.prototype.onprocessinginstruction = function (value) {\n        if (this.cbs.onprocessinginstruction) {\n            var name_2 = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(\"?\" + name_2, \"?\" + value);\n        }\n    };\n    Parser.prototype.oncomment = function (value) {\n        var _a, _b, _c, _d;\n        this.updatePosition(4);\n        (_b = (_a = this.cbs).oncomment) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n        (_d = (_c = this.cbs).oncommentend) === null || _d === void 0 ? void 0 : _d.call(_c);\n    };\n    Parser.prototype.oncdata = function (value) {\n        var _a, _b, _c, _d, _e, _f;\n        this.updatePosition(1);\n        if (this.options.xmlMode || this.options.recognizeCDATA) {\n            (_b = (_a = this.cbs).oncdatastart) === null || _b === void 0 ? void 0 : _b.call(_a);\n            (_d = (_c = this.cbs).ontext) === null || _d === void 0 ? void 0 : _d.call(_c, value);\n            (_f = (_e = this.cbs).oncdataend) === null || _f === void 0 ? void 0 : _f.call(_e);\n        }\n        else {\n            this.oncomment(\"[CDATA[\" + value + \"]]\");\n        }\n    };\n    Parser.prototype.onerror = function (err) {\n        var _a, _b;\n        (_b = (_a = this.cbs).onerror) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    Parser.prototype.onend = function () {\n        var _a, _b;\n        if (this.cbs.onclosetag) {\n            for (var i = this.stack.length; i > 0; this.cbs.onclosetag(this.stack[--i]))\n                ;\n        }\n        (_b = (_a = this.cbs).onend) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    /**\n     * Resets the parser to a blank state, ready to parse a new HTML document\n     */\n    Parser.prototype.reset = function () {\n        var _a, _b, _c, _d;\n        (_b = (_a = this.cbs).onreset) === null || _b === void 0 ? void 0 : _b.call(_a);\n        this.tokenizer.reset();\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribs = null;\n        this.stack = [];\n        (_d = (_c = this.cbs).onparserinit) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n    };\n    /**\n     * Parses a complete document and pushes it to the handler.\n     *\n     * @param data Document to parse.\n     */\n    Parser.prototype.parseComplete = function (data) {\n        this.reset();\n        this.end(data);\n    };\n    /**\n     * Parses a chunk of data and calls the corresponding callbacks.\n     *\n     * @param chunk Chunk to parse.\n     */\n    Parser.prototype.write = function (chunk) {\n        this.tokenizer.write(chunk);\n    };\n    /**\n     * Parses the end of the buffer and clears the stack, calls onend.\n     *\n     * @param chunk Optional final chunk to parse.\n     */\n    Parser.prototype.end = function (chunk) {\n        this.tokenizer.end(chunk);\n    };\n    /**\n     * Pauses parsing. The parser won't emit events until `resume` is called.\n     */\n    Parser.prototype.pause = function () {\n        this.tokenizer.pause();\n    };\n    /**\n     * Resumes parsing after `pause` was called.\n     */\n    Parser.prototype.resume = function () {\n        this.tokenizer.resume();\n    };\n    /**\n     * Alias of `write`, for backwards compatibility.\n     *\n     * @param chunk Chunk to parse.\n     * @deprecated\n     */\n    Parser.prototype.parseChunk = function (chunk) {\n        this.write(chunk);\n    };\n    /**\n     * Alias of `end`, for backwards compatibility.\n     *\n     * @param chunk Optional final chunk to parse.\n     * @deprecated\n     */\n    Parser.prototype.done = function (chunk) {\n        this.end(chunk);\n    };\n    return Parser;\n}());\nexports.Parser = Parser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decode_codepoint_1 = __importDefault(require(\"entities/lib/decode_codepoint\"));\nvar entities_json_1 = __importDefault(require(\"entities/lib/maps/entities.json\"));\nvar legacy_json_1 = __importDefault(require(\"entities/lib/maps/legacy.json\"));\nvar xml_json_1 = __importDefault(require(\"entities/lib/maps/xml.json\"));\nfunction whitespace(c) {\n    return c === \" \" || c === \"\\n\" || c === \"\\t\" || c === \"\\f\" || c === \"\\r\";\n}\nfunction isASCIIAlpha(c) {\n    return (c >= \"a\" && c <= \"z\") || (c >= \"A\" && c <= \"Z\");\n}\nfunction ifElseState(upper, SUCCESS, FAILURE) {\n    var lower = upper.toLowerCase();\n    if (upper === lower) {\n        return function (t, c) {\n            if (c === lower) {\n                t._state = SUCCESS;\n            }\n            else {\n                t._state = FAILURE;\n                t._index--;\n            }\n        };\n    }\n    return function (t, c) {\n        if (c === lower || c === upper) {\n            t._state = SUCCESS;\n        }\n        else {\n            t._state = FAILURE;\n            t._index--;\n        }\n    };\n}\nfunction consumeSpecialNameChar(upper, NEXT_STATE) {\n    var lower = upper.toLowerCase();\n    return function (t, c) {\n        if (c === lower || c === upper) {\n            t._state = NEXT_STATE;\n        }\n        else {\n            t._state = 3 /* InTagName */;\n            t._index--; // Consume the token again\n        }\n    };\n}\nvar stateBeforeCdata1 = ifElseState(\"C\", 24 /* BeforeCdata2 */, 16 /* InDeclaration */);\nvar stateBeforeCdata2 = ifElseState(\"D\", 25 /* BeforeCdata3 */, 16 /* InDeclaration */);\nvar stateBeforeCdata3 = ifElseState(\"A\", 26 /* BeforeCdata4 */, 16 /* InDeclaration */);\nvar stateBeforeCdata4 = ifElseState(\"T\", 27 /* BeforeCdata5 */, 16 /* InDeclaration */);\nvar stateBeforeCdata5 = ifElseState(\"A\", 28 /* BeforeCdata6 */, 16 /* InDeclaration */);\nvar stateBeforeScript1 = consumeSpecialNameChar(\"R\", 35 /* BeforeScript2 */);\nvar stateBeforeScript2 = consumeSpecialNameChar(\"I\", 36 /* BeforeScript3 */);\nvar stateBeforeScript3 = consumeSpecialNameChar(\"P\", 37 /* BeforeScript4 */);\nvar stateBeforeScript4 = consumeSpecialNameChar(\"T\", 38 /* BeforeScript5 */);\nvar stateAfterScript1 = ifElseState(\"R\", 40 /* AfterScript2 */, 1 /* Text */);\nvar stateAfterScript2 = ifElseState(\"I\", 41 /* AfterScript3 */, 1 /* Text */);\nvar stateAfterScript3 = ifElseState(\"P\", 42 /* AfterScript4 */, 1 /* Text */);\nvar stateAfterScript4 = ifElseState(\"T\", 43 /* AfterScript5 */, 1 /* Text */);\nvar stateBeforeStyle1 = consumeSpecialNameChar(\"Y\", 45 /* BeforeStyle2 */);\nvar stateBeforeStyle2 = consumeSpecialNameChar(\"L\", 46 /* BeforeStyle3 */);\nvar stateBeforeStyle3 = consumeSpecialNameChar(\"E\", 47 /* BeforeStyle4 */);\nvar stateAfterStyle1 = ifElseState(\"Y\", 49 /* AfterStyle2 */, 1 /* Text */);\nvar stateAfterStyle2 = ifElseState(\"L\", 50 /* AfterStyle3 */, 1 /* Text */);\nvar stateAfterStyle3 = ifElseState(\"E\", 51 /* AfterStyle4 */, 1 /* Text */);\nvar stateBeforeSpecialT = consumeSpecialNameChar(\"I\", 54 /* BeforeTitle1 */);\nvar stateBeforeTitle1 = consumeSpecialNameChar(\"T\", 55 /* BeforeTitle2 */);\nvar stateBeforeTitle2 = consumeSpecialNameChar(\"L\", 56 /* BeforeTitle3 */);\nvar stateBeforeTitle3 = consumeSpecialNameChar(\"E\", 57 /* BeforeTitle4 */);\nvar stateAfterSpecialTEnd = ifElseState(\"I\", 58 /* AfterTitle1 */, 1 /* Text */);\nvar stateAfterTitle1 = ifElseState(\"T\", 59 /* AfterTitle2 */, 1 /* Text */);\nvar stateAfterTitle2 = ifElseState(\"L\", 60 /* AfterTitle3 */, 1 /* Text */);\nvar stateAfterTitle3 = ifElseState(\"E\", 61 /* AfterTitle4 */, 1 /* Text */);\nvar stateBeforeEntity = ifElseState(\"#\", 63 /* BeforeNumericEntity */, 64 /* InNamedEntity */);\nvar stateBeforeNumericEntity = ifElseState(\"X\", 66 /* InHexEntity */, 65 /* InNumericEntity */);\nvar Tokenizer = /** @class */ (function () {\n    function Tokenizer(options, cbs) {\n        var _a;\n        /** The current state the tokenizer is in. */\n        this._state = 1 /* Text */;\n        /** The read buffer. */\n        this.buffer = \"\";\n        /** The beginning of the section that is currently being read. */\n        this.sectionStart = 0;\n        /** The index within the buffer that we are currently looking at. */\n        this._index = 0;\n        /**\n         * Data that has already been processed will be removed from the buffer occasionally.\n         * `_bufferOffset` keeps track of how many characters have been removed, to make sure position information is accurate.\n         */\n        this.bufferOffset = 0;\n        /** Some behavior, eg. when decoding entities, is done while we are in another state. This keeps track of the other state type. */\n        this.baseState = 1 /* Text */;\n        /** For special parsing behavior inside of script and style tags. */\n        this.special = 1 /* None */;\n        /** Indicates whether the tokenizer has been paused. */\n        this.running = true;\n        /** Indicates whether the tokenizer has finished running / `.end` has been called. */\n        this.ended = false;\n        this.cbs = cbs;\n        this.xmlMode = !!(options === null || options === void 0 ? void 0 : options.xmlMode);\n        this.decodeEntities = (_a = options === null || options === void 0 ? void 0 : options.decodeEntities) !== null && _a !== void 0 ? _a : true;\n    }\n    Tokenizer.prototype.reset = function () {\n        this._state = 1 /* Text */;\n        this.buffer = \"\";\n        this.sectionStart = 0;\n        this._index = 0;\n        this.bufferOffset = 0;\n        this.baseState = 1 /* Text */;\n        this.special = 1 /* None */;\n        this.running = true;\n        this.ended = false;\n    };\n    Tokenizer.prototype.write = function (chunk) {\n        if (this.ended)\n            this.cbs.onerror(Error(\".write() after done!\"));\n        this.buffer += chunk;\n        this.parse();\n    };\n    Tokenizer.prototype.end = function (chunk) {\n        if (this.ended)\n            this.cbs.onerror(Error(\".end() after done!\"));\n        if (chunk)\n            this.write(chunk);\n        this.ended = true;\n        if (this.running)\n            this.finish();\n    };\n    Tokenizer.prototype.pause = function () {\n        this.running = false;\n    };\n    Tokenizer.prototype.resume = function () {\n        this.running = true;\n        if (this._index < this.buffer.length) {\n            this.parse();\n        }\n        if (this.ended) {\n            this.finish();\n        }\n    };\n    /**\n     * The current index within all of the written data.\n     */\n    Tokenizer.prototype.getAbsoluteIndex = function () {\n        return this.bufferOffset + this._index;\n    };\n    Tokenizer.prototype.stateText = function (c) {\n        if (c === \"<\") {\n            if (this._index > this.sectionStart) {\n                this.cbs.ontext(this.getSection());\n            }\n            this._state = 2 /* BeforeTagName */;\n            this.sectionStart = this._index;\n        }\n        else if (this.decodeEntities &&\n            c === \"&\" &&\n            (this.special === 1 /* None */ || this.special === 4 /* Title */)) {\n            if (this._index > this.sectionStart) {\n                this.cbs.ontext(this.getSection());\n            }\n            this.baseState = 1 /* Text */;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeTagName = function (c) {\n        if (c === \"/\") {\n            this._state = 5 /* BeforeClosingTagName */;\n        }\n        else if (c === \"<\") {\n            this.cbs.ontext(this.getSection());\n            this.sectionStart = this._index;\n        }\n        else if (c === \">\" ||\n            this.special !== 1 /* None */ ||\n            whitespace(c)) {\n            this._state = 1 /* Text */;\n        }\n        else if (c === \"!\") {\n            this._state = 15 /* BeforeDeclaration */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"?\") {\n            this._state = 17 /* InProcessingInstruction */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (!isASCIIAlpha(c)) {\n            this._state = 1 /* Text */;\n        }\n        else {\n            this._state =\n                !this.xmlMode && (c === \"s\" || c === \"S\")\n                    ? 32 /* BeforeSpecialS */\n                    : !this.xmlMode && (c === \"t\" || c === \"T\")\n                        ? 52 /* BeforeSpecialT */\n                        : 3 /* InTagName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInTagName = function (c) {\n        if (c === \"/\" || c === \">\" || whitespace(c)) {\n            this.emitToken(\"onopentagname\");\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateBeforeClosingTagName = function (c) {\n        if (whitespace(c)) {\n            // Ignore\n        }\n        else if (c === \">\") {\n            this._state = 1 /* Text */;\n        }\n        else if (this.special !== 1 /* None */) {\n            if (c === \"s\" || c === \"S\") {\n                this._state = 33 /* BeforeSpecialSEnd */;\n            }\n            else if (c === \"t\" || c === \"T\") {\n                this._state = 53 /* BeforeSpecialTEnd */;\n            }\n            else {\n                this._state = 1 /* Text */;\n                this._index--;\n            }\n        }\n        else if (!isASCIIAlpha(c)) {\n            this._state = 20 /* InSpecialComment */;\n            this.sectionStart = this._index;\n        }\n        else {\n            this._state = 6 /* InClosingTagName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInClosingTagName = function (c) {\n        if (c === \">\" || whitespace(c)) {\n            this.emitToken(\"onclosetag\");\n            this._state = 7 /* AfterClosingTagName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateAfterClosingTagName = function (c) {\n        // Skip everything until \">\"\n        if (c === \">\") {\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateBeforeAttributeName = function (c) {\n        if (c === \">\") {\n            this.cbs.onopentagend();\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"/\") {\n            this._state = 4 /* InSelfClosingTag */;\n        }\n        else if (!whitespace(c)) {\n            this._state = 9 /* InAttributeName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInSelfClosingTag = function (c) {\n        if (c === \">\") {\n            this.cbs.onselfclosingtag();\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n            this.special = 1 /* None */; // Reset special state, in case of self-closing special tags\n        }\n        else if (!whitespace(c)) {\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInAttributeName = function (c) {\n        if (c === \"=\" || c === \"/\" || c === \">\" || whitespace(c)) {\n            this.cbs.onattribname(this.getSection());\n            this.sectionStart = -1;\n            this._state = 10 /* AfterAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateAfterAttributeName = function (c) {\n        if (c === \"=\") {\n            this._state = 11 /* BeforeAttributeValue */;\n        }\n        else if (c === \"/\" || c === \">\") {\n            this.cbs.onattribend(undefined);\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n        else if (!whitespace(c)) {\n            this.cbs.onattribend(undefined);\n            this._state = 9 /* InAttributeName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeAttributeValue = function (c) {\n        if (c === '\"') {\n            this._state = 12 /* InAttributeValueDq */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"'\") {\n            this._state = 13 /* InAttributeValueSq */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (!whitespace(c)) {\n            this._state = 14 /* InAttributeValueNq */;\n            this.sectionStart = this._index;\n            this._index--; // Reconsume token\n        }\n    };\n    Tokenizer.prototype.handleInAttributeValue = function (c, quote) {\n        if (c === quote) {\n            this.emitToken(\"onattribdata\");\n            this.cbs.onattribend(quote);\n            this._state = 8 /* BeforeAttributeName */;\n        }\n        else if (this.decodeEntities && c === \"&\") {\n            this.emitToken(\"onattribdata\");\n            this.baseState = this._state;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInAttributeValueDoubleQuotes = function (c) {\n        this.handleInAttributeValue(c, '\"');\n    };\n    Tokenizer.prototype.stateInAttributeValueSingleQuotes = function (c) {\n        this.handleInAttributeValue(c, \"'\");\n    };\n    Tokenizer.prototype.stateInAttributeValueNoQuotes = function (c) {\n        if (whitespace(c) || c === \">\") {\n            this.emitToken(\"onattribdata\");\n            this.cbs.onattribend(null);\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n        else if (this.decodeEntities && c === \"&\") {\n            this.emitToken(\"onattribdata\");\n            this.baseState = this._state;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeDeclaration = function (c) {\n        this._state =\n            c === \"[\"\n                ? 23 /* BeforeCdata1 */\n                : c === \"-\"\n                    ? 18 /* BeforeComment */\n                    : 16 /* InDeclaration */;\n    };\n    Tokenizer.prototype.stateInDeclaration = function (c) {\n        if (c === \">\") {\n            this.cbs.ondeclaration(this.getSection());\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateInProcessingInstruction = function (c) {\n        if (c === \">\") {\n            this.cbs.onprocessinginstruction(this.getSection());\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateBeforeComment = function (c) {\n        if (c === \"-\") {\n            this._state = 19 /* InComment */;\n            this.sectionStart = this._index + 1;\n        }\n        else {\n            this._state = 16 /* InDeclaration */;\n        }\n    };\n    Tokenizer.prototype.stateInComment = function (c) {\n        if (c === \"-\")\n            this._state = 21 /* AfterComment1 */;\n    };\n    Tokenizer.prototype.stateInSpecialComment = function (c) {\n        if (c === \">\") {\n            this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateAfterComment1 = function (c) {\n        if (c === \"-\") {\n            this._state = 22 /* AfterComment2 */;\n        }\n        else {\n            this._state = 19 /* InComment */;\n        }\n    };\n    Tokenizer.prototype.stateAfterComment2 = function (c) {\n        if (c === \">\") {\n            // Remove 2 trailing chars\n            this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index - 2));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c !== \"-\") {\n            this._state = 19 /* InComment */;\n        }\n        // Else: stay in AFTER_COMMENT_2 (`--->`)\n    };\n    Tokenizer.prototype.stateBeforeCdata6 = function (c) {\n        if (c === \"[\") {\n            this._state = 29 /* InCdata */;\n            this.sectionStart = this._index + 1;\n        }\n        else {\n            this._state = 16 /* InDeclaration */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInCdata = function (c) {\n        if (c === \"]\")\n            this._state = 30 /* AfterCdata1 */;\n    };\n    Tokenizer.prototype.stateAfterCdata1 = function (c) {\n        if (c === \"]\")\n            this._state = 31 /* AfterCdata2 */;\n        else\n            this._state = 29 /* InCdata */;\n    };\n    Tokenizer.prototype.stateAfterCdata2 = function (c) {\n        if (c === \">\") {\n            // Remove 2 trailing chars\n            this.cbs.oncdata(this.buffer.substring(this.sectionStart, this._index - 2));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c !== \"]\") {\n            this._state = 29 /* InCdata */;\n        }\n        // Else: stay in AFTER_CDATA_2 (`]]]>`)\n    };\n    Tokenizer.prototype.stateBeforeSpecialS = function (c) {\n        if (c === \"c\" || c === \"C\") {\n            this._state = 34 /* BeforeScript1 */;\n        }\n        else if (c === \"t\" || c === \"T\") {\n            this._state = 44 /* BeforeStyle1 */;\n        }\n        else {\n            this._state = 3 /* InTagName */;\n            this._index--; // Consume the token again\n        }\n    };\n    Tokenizer.prototype.stateBeforeSpecialSEnd = function (c) {\n        if (this.special === 2 /* Script */ && (c === \"c\" || c === \"C\")) {\n            this._state = 39 /* AfterScript1 */;\n        }\n        else if (this.special === 3 /* Style */ && (c === \"t\" || c === \"T\")) {\n            this._state = 48 /* AfterStyle1 */;\n        }\n        else\n            this._state = 1 /* Text */;\n    };\n    Tokenizer.prototype.stateBeforeSpecialLast = function (c, special) {\n        if (c === \"/\" || c === \">\" || whitespace(c)) {\n            this.special = special;\n        }\n        this._state = 3 /* InTagName */;\n        this._index--; // Consume the token again\n    };\n    Tokenizer.prototype.stateAfterSpecialLast = function (c, sectionStartOffset) {\n        if (c === \">\" || whitespace(c)) {\n            this.special = 1 /* None */;\n            this._state = 6 /* InClosingTagName */;\n            this.sectionStart = this._index - sectionStartOffset;\n            this._index--; // Reconsume the token\n        }\n        else\n            this._state = 1 /* Text */;\n    };\n    // For entities terminated with a semicolon\n    Tokenizer.prototype.parseFixedEntity = function (map) {\n        if (map === void 0) { map = this.xmlMode ? xml_json_1.default : entities_json_1.default; }\n        // Offset = 1\n        if (this.sectionStart + 1 < this._index) {\n            var entity = this.buffer.substring(this.sectionStart + 1, this._index);\n            if (Object.prototype.hasOwnProperty.call(map, entity)) {\n                this.emitPartial(map[entity]);\n                this.sectionStart = this._index + 1;\n            }\n        }\n    };\n    // Parses legacy entities (without trailing semicolon)\n    Tokenizer.prototype.parseLegacyEntity = function () {\n        var start = this.sectionStart + 1;\n        // The max length of legacy entities is 6\n        var limit = Math.min(this._index - start, 6);\n        while (limit >= 2) {\n            // The min length of legacy entities is 2\n            var entity = this.buffer.substr(start, limit);\n            if (Object.prototype.hasOwnProperty.call(legacy_json_1.default, entity)) {\n                this.emitPartial(legacy_json_1.default[entity]);\n                this.sectionStart += limit + 1;\n                return;\n            }\n            limit--;\n        }\n    };\n    Tokenizer.prototype.stateInNamedEntity = function (c) {\n        if (c === \";\") {\n            this.parseFixedEntity();\n            // Retry as legacy entity if entity wasn't parsed\n            if (this.baseState === 1 /* Text */ &&\n                this.sectionStart + 1 < this._index &&\n                !this.xmlMode) {\n                this.parseLegacyEntity();\n            }\n            this._state = this.baseState;\n        }\n        else if ((c < \"0\" || c > \"9\") && !isASCIIAlpha(c)) {\n            if (this.xmlMode || this.sectionStart + 1 === this._index) {\n                // Ignore\n            }\n            else if (this.baseState !== 1 /* Text */) {\n                if (c !== \"=\") {\n                    // Parse as legacy entity, without allowing additional characters.\n                    this.parseFixedEntity(legacy_json_1.default);\n                }\n            }\n            else {\n                this.parseLegacyEntity();\n            }\n            this._state = this.baseState;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.decodeNumericEntity = function (offset, base, strict) {\n        var sectionStart = this.sectionStart + offset;\n        if (sectionStart !== this._index) {\n            // Parse entity\n            var entity = this.buffer.substring(sectionStart, this._index);\n            var parsed = parseInt(entity, base);\n            this.emitPartial(decode_codepoint_1.default(parsed));\n            this.sectionStart = strict ? this._index + 1 : this._index;\n        }\n        this._state = this.baseState;\n    };\n    Tokenizer.prototype.stateInNumericEntity = function (c) {\n        if (c === \";\") {\n            this.decodeNumericEntity(2, 10, true);\n        }\n        else if (c < \"0\" || c > \"9\") {\n            if (!this.xmlMode) {\n                this.decodeNumericEntity(2, 10, false);\n            }\n            else {\n                this._state = this.baseState;\n            }\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInHexEntity = function (c) {\n        if (c === \";\") {\n            this.decodeNumericEntity(3, 16, true);\n        }\n        else if ((c < \"a\" || c > \"f\") &&\n            (c < \"A\" || c > \"F\") &&\n            (c < \"0\" || c > \"9\")) {\n            if (!this.xmlMode) {\n                this.decodeNumericEntity(3, 16, false);\n            }\n            else {\n                this._state = this.baseState;\n            }\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.cleanup = function () {\n        if (this.sectionStart < 0) {\n            this.buffer = \"\";\n            this.bufferOffset += this._index;\n            this._index = 0;\n        }\n        else if (this.running) {\n            if (this._state === 1 /* Text */) {\n                if (this.sectionStart !== this._index) {\n                    this.cbs.ontext(this.buffer.substr(this.sectionStart));\n                }\n                this.buffer = \"\";\n                this.bufferOffset += this._index;\n                this._index = 0;\n            }\n            else if (this.sectionStart === this._index) {\n                // The section just started\n                this.buffer = \"\";\n                this.bufferOffset += this._index;\n                this._index = 0;\n            }\n            else {\n                // Remove everything unnecessary\n                this.buffer = this.buffer.substr(this.sectionStart);\n                this._index -= this.sectionStart;\n                this.bufferOffset += this.sectionStart;\n            }\n            this.sectionStart = 0;\n        }\n    };\n    /**\n     * Iterates through the buffer, calling the function corresponding to the current state.\n     *\n     * States that are more likely to be hit are higher up, as a performance improvement.\n     */\n    Tokenizer.prototype.parse = function () {\n        while (this._index < this.buffer.length && this.running) {\n            var c = this.buffer.charAt(this._index);\n            if (this._state === 1 /* Text */) {\n                this.stateText(c);\n            }\n            else if (this._state === 12 /* InAttributeValueDq */) {\n                this.stateInAttributeValueDoubleQuotes(c);\n            }\n            else if (this._state === 9 /* InAttributeName */) {\n                this.stateInAttributeName(c);\n            }\n            else if (this._state === 19 /* InComment */) {\n                this.stateInComment(c);\n            }\n            else if (this._state === 20 /* InSpecialComment */) {\n                this.stateInSpecialComment(c);\n            }\n            else if (this._state === 8 /* BeforeAttributeName */) {\n                this.stateBeforeAttributeName(c);\n            }\n            else if (this._state === 3 /* InTagName */) {\n                this.stateInTagName(c);\n            }\n            else if (this._state === 6 /* InClosingTagName */) {\n                this.stateInClosingTagName(c);\n            }\n            else if (this._state === 2 /* BeforeTagName */) {\n                this.stateBeforeTagName(c);\n            }\n            else if (this._state === 10 /* AfterAttributeName */) {\n                this.stateAfterAttributeName(c);\n            }\n            else if (this._state === 13 /* InAttributeValueSq */) {\n                this.stateInAttributeValueSingleQuotes(c);\n            }\n            else if (this._state === 11 /* BeforeAttributeValue */) {\n                this.stateBeforeAttributeValue(c);\n            }\n            else if (this._state === 5 /* BeforeClosingTagName */) {\n                this.stateBeforeClosingTagName(c);\n            }\n            else if (this._state === 7 /* AfterClosingTagName */) {\n                this.stateAfterClosingTagName(c);\n            }\n            else if (this._state === 32 /* BeforeSpecialS */) {\n                this.stateBeforeSpecialS(c);\n            }\n            else if (this._state === 21 /* AfterComment1 */) {\n                this.stateAfterComment1(c);\n            }\n            else if (this._state === 14 /* InAttributeValueNq */) {\n                this.stateInAttributeValueNoQuotes(c);\n            }\n            else if (this._state === 4 /* InSelfClosingTag */) {\n                this.stateInSelfClosingTag(c);\n            }\n            else if (this._state === 16 /* InDeclaration */) {\n                this.stateInDeclaration(c);\n            }\n            else if (this._state === 15 /* BeforeDeclaration */) {\n                this.stateBeforeDeclaration(c);\n            }\n            else if (this._state === 22 /* AfterComment2 */) {\n                this.stateAfterComment2(c);\n            }\n            else if (this._state === 18 /* BeforeComment */) {\n                this.stateBeforeComment(c);\n            }\n            else if (this._state === 33 /* BeforeSpecialSEnd */) {\n                this.stateBeforeSpecialSEnd(c);\n            }\n            else if (this._state === 53 /* BeforeSpecialTEnd */) {\n                stateAfterSpecialTEnd(this, c);\n            }\n            else if (this._state === 39 /* AfterScript1 */) {\n                stateAfterScript1(this, c);\n            }\n            else if (this._state === 40 /* AfterScript2 */) {\n                stateAfterScript2(this, c);\n            }\n            else if (this._state === 41 /* AfterScript3 */) {\n                stateAfterScript3(this, c);\n            }\n            else if (this._state === 34 /* BeforeScript1 */) {\n                stateBeforeScript1(this, c);\n            }\n            else if (this._state === 35 /* BeforeScript2 */) {\n                stateBeforeScript2(this, c);\n            }\n            else if (this._state === 36 /* BeforeScript3 */) {\n                stateBeforeScript3(this, c);\n            }\n            else if (this._state === 37 /* BeforeScript4 */) {\n                stateBeforeScript4(this, c);\n            }\n            else if (this._state === 38 /* BeforeScript5 */) {\n                this.stateBeforeSpecialLast(c, 2 /* Script */);\n            }\n            else if (this._state === 42 /* AfterScript4 */) {\n                stateAfterScript4(this, c);\n            }\n            else if (this._state === 43 /* AfterScript5 */) {\n                this.stateAfterSpecialLast(c, 6);\n            }\n            else if (this._state === 44 /* BeforeStyle1 */) {\n                stateBeforeStyle1(this, c);\n            }\n            else if (this._state === 29 /* InCdata */) {\n                this.stateInCdata(c);\n            }\n            else if (this._state === 45 /* BeforeStyle2 */) {\n                stateBeforeStyle2(this, c);\n            }\n            else if (this._state === 46 /* BeforeStyle3 */) {\n                stateBeforeStyle3(this, c);\n            }\n            else if (this._state === 47 /* BeforeStyle4 */) {\n                this.stateBeforeSpecialLast(c, 3 /* Style */);\n            }\n            else if (this._state === 48 /* AfterStyle1 */) {\n                stateAfterStyle1(this, c);\n            }\n            else if (this._state === 49 /* AfterStyle2 */) {\n                stateAfterStyle2(this, c);\n            }\n            else if (this._state === 50 /* AfterStyle3 */) {\n                stateAfterStyle3(this, c);\n            }\n            else if (this._state === 51 /* AfterStyle4 */) {\n                this.stateAfterSpecialLast(c, 5);\n            }\n            else if (this._state === 52 /* BeforeSpecialT */) {\n                stateBeforeSpecialT(this, c);\n            }\n            else if (this._state === 54 /* BeforeTitle1 */) {\n                stateBeforeTitle1(this, c);\n            }\n            else if (this._state === 55 /* BeforeTitle2 */) {\n                stateBeforeTitle2(this, c);\n            }\n            else if (this._state === 56 /* BeforeTitle3 */) {\n                stateBeforeTitle3(this, c);\n            }\n            else if (this._state === 57 /* BeforeTitle4 */) {\n                this.stateBeforeSpecialLast(c, 4 /* Title */);\n            }\n            else if (this._state === 58 /* AfterTitle1 */) {\n                stateAfterTitle1(this, c);\n            }\n            else if (this._state === 59 /* AfterTitle2 */) {\n                stateAfterTitle2(this, c);\n            }\n            else if (this._state === 60 /* AfterTitle3 */) {\n                stateAfterTitle3(this, c);\n            }\n            else if (this._state === 61 /* AfterTitle4 */) {\n                this.stateAfterSpecialLast(c, 5);\n            }\n            else if (this._state === 17 /* InProcessingInstruction */) {\n                this.stateInProcessingInstruction(c);\n            }\n            else if (this._state === 64 /* InNamedEntity */) {\n                this.stateInNamedEntity(c);\n            }\n            else if (this._state === 23 /* BeforeCdata1 */) {\n                stateBeforeCdata1(this, c);\n            }\n            else if (this._state === 62 /* BeforeEntity */) {\n                stateBeforeEntity(this, c);\n            }\n            else if (this._state === 24 /* BeforeCdata2 */) {\n                stateBeforeCdata2(this, c);\n            }\n            else if (this._state === 25 /* BeforeCdata3 */) {\n                stateBeforeCdata3(this, c);\n            }\n            else if (this._state === 30 /* AfterCdata1 */) {\n                this.stateAfterCdata1(c);\n            }\n            else if (this._state === 31 /* AfterCdata2 */) {\n                this.stateAfterCdata2(c);\n            }\n            else if (this._state === 26 /* BeforeCdata4 */) {\n                stateBeforeCdata4(this, c);\n            }\n            else if (this._state === 27 /* BeforeCdata5 */) {\n                stateBeforeCdata5(this, c);\n            }\n            else if (this._state === 28 /* BeforeCdata6 */) {\n                this.stateBeforeCdata6(c);\n            }\n            else if (this._state === 66 /* InHexEntity */) {\n                this.stateInHexEntity(c);\n            }\n            else if (this._state === 65 /* InNumericEntity */) {\n                this.stateInNumericEntity(c);\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            }\n            else if (this._state === 63 /* BeforeNumericEntity */) {\n                stateBeforeNumericEntity(this, c);\n            }\n            else {\n                this.cbs.onerror(Error(\"unknown _state\"), this._state);\n            }\n            this._index++;\n        }\n        this.cleanup();\n    };\n    Tokenizer.prototype.finish = function () {\n        // If there is remaining data, emit it in a reasonable way\n        if (this.sectionStart < this._index) {\n            this.handleTrailingData();\n        }\n        this.cbs.onend();\n    };\n    Tokenizer.prototype.handleTrailingData = function () {\n        var data = this.buffer.substr(this.sectionStart);\n        if (this._state === 29 /* InCdata */ ||\n            this._state === 30 /* AfterCdata1 */ ||\n            this._state === 31 /* AfterCdata2 */) {\n            this.cbs.oncdata(data);\n        }\n        else if (this._state === 19 /* InComment */ ||\n            this._state === 21 /* AfterComment1 */ ||\n            this._state === 22 /* AfterComment2 */) {\n            this.cbs.oncomment(data);\n        }\n        else if (this._state === 64 /* InNamedEntity */ && !this.xmlMode) {\n            this.parseLegacyEntity();\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state === 65 /* InNumericEntity */ && !this.xmlMode) {\n            this.decodeNumericEntity(2, 10, false);\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state === 66 /* InHexEntity */ && !this.xmlMode) {\n            this.decodeNumericEntity(3, 16, false);\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state !== 3 /* InTagName */ &&\n            this._state !== 8 /* BeforeAttributeName */ &&\n            this._state !== 11 /* BeforeAttributeValue */ &&\n            this._state !== 10 /* AfterAttributeName */ &&\n            this._state !== 9 /* InAttributeName */ &&\n            this._state !== 13 /* InAttributeValueSq */ &&\n            this._state !== 12 /* InAttributeValueDq */ &&\n            this._state !== 14 /* InAttributeValueNq */ &&\n            this._state !== 6 /* InClosingTagName */) {\n            this.cbs.ontext(data);\n        }\n        /*\n         * Else, ignore remaining data\n         * TODO add a way to remove current tag\n         */\n    };\n    Tokenizer.prototype.getSection = function () {\n        return this.buffer.substring(this.sectionStart, this._index);\n    };\n    Tokenizer.prototype.emitToken = function (name) {\n        this.cbs[name](this.getSection());\n        this.sectionStart = -1;\n    };\n    Tokenizer.prototype.emitPartial = function (value) {\n        if (this.baseState !== 1 /* Text */) {\n            this.cbs.onattribdata(value); // TODO implement the new event\n        }\n        else {\n            this.cbs.ontext(value);\n        }\n    };\n    return Tokenizer;\n}());\nexports.default = Tokenizer;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseFeed = exports.FeedHandler = void 0;\nvar domhandler_1 = __importDefault(require(\"domhandler\"));\nvar DomUtils = __importStar(require(\"domutils\"));\nvar Parser_1 = require(\"./Parser\");\nvar FeedItemMediaMedium;\n(function (FeedItemMediaMedium) {\n    FeedItemMediaMedium[FeedItemMediaMedium[\"image\"] = 0] = \"image\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"audio\"] = 1] = \"audio\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"video\"] = 2] = \"video\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"document\"] = 3] = \"document\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"executable\"] = 4] = \"executable\";\n})(FeedItemMediaMedium || (FeedItemMediaMedium = {}));\nvar FeedItemMediaExpression;\n(function (FeedItemMediaExpression) {\n    FeedItemMediaExpression[FeedItemMediaExpression[\"sample\"] = 0] = \"sample\";\n    FeedItemMediaExpression[FeedItemMediaExpression[\"full\"] = 1] = \"full\";\n    FeedItemMediaExpression[FeedItemMediaExpression[\"nonstop\"] = 2] = \"nonstop\";\n})(FeedItemMediaExpression || (FeedItemMediaExpression = {}));\n// TODO: Consume data as it is coming in\nvar FeedHandler = /** @class */ (function (_super) {\n    __extends(FeedHandler, _super);\n    /**\n     *\n     * @param callback\n     * @param options\n     */\n    function FeedHandler(callback, options) {\n        var _this = this;\n        if (typeof callback === \"object\") {\n            callback = undefined;\n            options = callback;\n        }\n        _this = _super.call(this, callback, options) || this;\n        return _this;\n    }\n    FeedHandler.prototype.onend = function () {\n        var _a, _b;\n        var feed = {};\n        var feedRoot = getOneElement(isValidFeed, this.dom);\n        if (feedRoot) {\n            if (feedRoot.name === \"feed\") {\n                var childs = feedRoot.children;\n                feed.type = \"atom\";\n                addConditionally(feed, \"id\", \"id\", childs);\n                addConditionally(feed, \"title\", \"title\", childs);\n                var href = getAttribute(\"href\", getOneElement(\"link\", childs));\n                if (href) {\n                    feed.link = href;\n                }\n                addConditionally(feed, \"description\", \"subtitle\", childs);\n                var updated = fetch(\"updated\", childs);\n                if (updated) {\n                    feed.updated = new Date(updated);\n                }\n                addConditionally(feed, \"author\", \"email\", childs, true);\n                feed.items = getElements(\"entry\", childs).map(function (item) {\n                    var entry = {};\n                    var children = item.children;\n                    addConditionally(entry, \"id\", \"id\", children);\n                    addConditionally(entry, \"title\", \"title\", children);\n                    var href = getAttribute(\"href\", getOneElement(\"link\", children));\n                    if (href) {\n                        entry.link = href;\n                    }\n                    var description = fetch(\"summary\", children) ||\n                        fetch(\"content\", children);\n                    if (description) {\n                        entry.description = description;\n                    }\n                    var pubDate = fetch(\"updated\", children);\n                    if (pubDate) {\n                        entry.pubDate = new Date(pubDate);\n                    }\n                    entry.media = getMediaElements(children);\n                    return entry;\n                });\n            }\n            else {\n                var childs = (_b = (_a = getOneElement(\"channel\", feedRoot.children)) === null || _a === void 0 ? void 0 : _a.children) !== null && _b !== void 0 ? _b : [];\n                feed.type = feedRoot.name.substr(0, 3);\n                feed.id = \"\";\n                addConditionally(feed, \"title\", \"title\", childs);\n                addConditionally(feed, \"link\", \"link\", childs);\n                addConditionally(feed, \"description\", \"description\", childs);\n                var updated = fetch(\"lastBuildDate\", childs);\n                if (updated) {\n                    feed.updated = new Date(updated);\n                }\n                addConditionally(feed, \"author\", \"managingEditor\", childs, true);\n                feed.items = getElements(\"item\", feedRoot.children).map(function (item) {\n                    var entry = {};\n                    var children = item.children;\n                    addConditionally(entry, \"id\", \"guid\", children);\n                    addConditionally(entry, \"title\", \"title\", children);\n                    addConditionally(entry, \"link\", \"link\", children);\n                    addConditionally(entry, \"description\", \"description\", children);\n                    var pubDate = fetch(\"pubDate\", children);\n                    if (pubDate)\n                        entry.pubDate = new Date(pubDate);\n                    entry.media = getMediaElements(children);\n                    return entry;\n                });\n            }\n        }\n        this.feed = feed;\n        this.handleCallback(feedRoot ? null : Error(\"couldn't find root of feed\"));\n    };\n    return FeedHandler;\n}(domhandler_1.default));\nexports.FeedHandler = FeedHandler;\nfunction getMediaElements(where) {\n    return getElements(\"media:content\", where).map(function (elem) {\n        var media = {\n            medium: elem.attribs.medium,\n            isDefault: !!elem.attribs.isDefault,\n        };\n        if (elem.attribs.url) {\n            media.url = elem.attribs.url;\n        }\n        if (elem.attribs.fileSize) {\n            media.fileSize = parseInt(elem.attribs.fileSize, 10);\n        }\n        if (elem.attribs.type) {\n            media.type = elem.attribs.type;\n        }\n        if (elem.attribs.expression) {\n            media.expression = elem.attribs\n                .expression;\n        }\n        if (elem.attribs.bitrate) {\n            media.bitrate = parseInt(elem.attribs.bitrate, 10);\n        }\n        if (elem.attribs.framerate) {\n            media.framerate = parseInt(elem.attribs.framerate, 10);\n        }\n        if (elem.attribs.samplingrate) {\n            media.samplingrate = parseInt(elem.attribs.samplingrate, 10);\n        }\n        if (elem.attribs.channels) {\n            media.channels = parseInt(elem.attribs.channels, 10);\n        }\n        if (elem.attribs.duration) {\n            media.duration = parseInt(elem.attribs.duration, 10);\n        }\n        if (elem.attribs.height) {\n            media.height = parseInt(elem.attribs.height, 10);\n        }\n        if (elem.attribs.width) {\n            media.width = parseInt(elem.attribs.width, 10);\n        }\n        if (elem.attribs.lang) {\n            media.lang = elem.attribs.lang;\n        }\n        return media;\n    });\n}\nfunction getElements(tagName, where) {\n    return DomUtils.getElementsByTagName(tagName, where, true);\n}\nfunction getOneElement(tagName, node) {\n    return DomUtils.getElementsByTagName(tagName, node, true, 1)[0];\n}\nfunction fetch(tagName, where, recurse) {\n    if (recurse === void 0) { recurse = false; }\n    return DomUtils.getText(DomUtils.getElementsByTagName(tagName, where, recurse, 1)).trim();\n}\nfunction getAttribute(name, elem) {\n    if (!elem) {\n        return null;\n    }\n    var attribs = elem.attribs;\n    return attribs[name];\n}\nfunction addConditionally(obj, prop, what, where, recurse) {\n    if (recurse === void 0) { recurse = false; }\n    var tmp = fetch(what, where, recurse);\n    if (tmp)\n        obj[prop] = tmp;\n}\nfunction isValidFeed(value) {\n    return value === \"rss\" || value === \"feed\" || value === \"rdf:RDF\";\n}\nvar defaultOptions = { xmlMode: true };\n/**\n * Parse a feed.\n *\n * @param feed The feed that should be parsed, as a string.\n * @param options Optionally, options for parsing. When using this option, you probably want to set `xmlMode` to `true`.\n */\nfunction parseFeed(feed, options) {\n    if (options === void 0) { options = defaultOptions; }\n    var handler = new FeedHandler(options);\n    new Parser_1.Parser(handler, options).end(feed);\n    return handler.feed;\n}\nexports.parseFeed = parseFeed;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./stringify\"), exports);\n__exportStar(require(\"./traversal\"), exports);\n__exportStar(require(\"./manipulation\"), exports);\n__exportStar(require(\"./querying\"), exports);\n__exportStar(require(\"./legacy\"), exports);\n__exportStar(require(\"./helpers\"), exports);\n__exportStar(require(\"./tagtypes\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.findAll = exports.existsOne = exports.findOne = exports.findOneChild = exports.find = exports.filter = void 0;\nvar tagtypes_1 = require(\"./tagtypes\");\n/**\n * Search a node and its children for nodes passing a test function.\n *\n * @param test Function to test nodes on.\n * @param node Node to search. Will be included in the result set if it matches.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes passing `test`.\n */\nfunction filter(test, node, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    if (!Array.isArray(node))\n        node = [node];\n    return find(test, node, recurse, limit);\n}\nexports.filter = filter;\n/**\n * Search an array of node and its children for nodes passing a test function.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes passing `test`.\n */\nfunction find(test, nodes, recurse, limit) {\n    var result = [];\n    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n        var elem = nodes_1[_i];\n        if (test(elem)) {\n            result.push(elem);\n            if (--limit <= 0)\n                break;\n        }\n        if (recurse && tagtypes_1.hasChildren(elem) && elem.children.length > 0) {\n            var children = find(test, elem.children, recurse, limit);\n            result.push.apply(result, children);\n            limit -= children.length;\n            if (limit <= 0)\n                break;\n        }\n    }\n    return result;\n}\nexports.find = find;\n/**\n * Finds the first element inside of an array that matches a test function.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns The first node in the array that passes `test`.\n */\nfunction findOneChild(test, nodes) {\n    return nodes.find(test);\n}\nexports.findOneChild = findOneChild;\n/**\n * Finds one element in a tree that passes a test.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @param recurse Also consider child nodes.\n * @returns The first child node that passes `test`.\n */\nfunction findOne(test, nodes, recurse) {\n    if (recurse === void 0) { recurse = true; }\n    var elem = null;\n    for (var i = 0; i < nodes.length && !elem; i++) {\n        var checked = nodes[i];\n        if (!tagtypes_1.isTag(checked)) {\n            continue;\n        }\n        else if (test(checked)) {\n            elem = checked;\n        }\n        else if (recurse && checked.children.length > 0) {\n            elem = findOne(test, checked.children);\n        }\n    }\n    return elem;\n}\nexports.findOne = findOne;\n/**\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns Whether a tree of nodes contains at least one node passing a test.\n */\nfunction existsOne(test, nodes) {\n    return nodes.some(function (checked) {\n        return tagtypes_1.isTag(checked) &&\n            (test(checked) ||\n                (checked.children.length > 0 &&\n                    existsOne(test, checked.children)));\n    });\n}\nexports.existsOne = existsOne;\n/**\n * Search and array of nodes and its children for nodes passing a test function.\n *\n * Same as `find`, only with less options, leading to reduced complexity.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns All nodes passing `test`.\n */\nfunction findAll(test, nodes) {\n    var _a;\n    var result = [];\n    var stack = nodes.filter(tagtypes_1.isTag);\n    var elem;\n    while ((elem = stack.shift())) {\n        var children = (_a = elem.children) === null || _a === void 0 ? void 0 : _a.filter(tagtypes_1.isTag);\n        if (children && children.length > 0) {\n            stack.unshift.apply(stack, children);\n        }\n        if (test(elem))\n            result.push(elem);\n    }\n    return result;\n}\nexports.findAll = findAll;\n"],"sourceRoot":""}